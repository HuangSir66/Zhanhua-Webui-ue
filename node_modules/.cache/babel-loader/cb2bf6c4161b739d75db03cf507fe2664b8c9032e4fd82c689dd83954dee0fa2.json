{"ast":null,"code":"let faceInputElement = null;\nlet bodyInputElement = null;\nexport default {\n  data() {\n    return {\n      faceImageUrl: \"\",\n      // 存储人脸图像 URL\n      bodyTemplateUrl: \"\",\n      // 存储身体模版 URL\n      generatedImageUrl: \"\" // 存储后端返回的生成图片 URL\n    };\n  },\n  methods: {\n    // 点击上传头像\n    toGetFaceImg() {\n      if (!faceInputElement) {\n        faceInputElement = this.createInputElement(this.uploadFaceImage);\n      }\n      faceInputElement.click();\n    },\n    // 点击上传模版\n    toGetBodyTemplate() {\n      if (!bodyInputElement) {\n        bodyInputElement = this.createInputElement(this.uploadBodyTemplate);\n      }\n      bodyInputElement.click();\n    },\n    // 创建上传控件\n    createInputElement(callback) {\n      const input = document.createElement(\"input\");\n      input.setAttribute(\"type\", \"file\");\n      input.style.display = \"none\";\n      input.addEventListener(\"change\", callback, false);\n      document.body.appendChild(input);\n      return input;\n    },\n    // 上传头像逻辑\n    uploadFaceImage(event) {\n      this.handleFileUpload(event, url => {\n        this.faceImageUrl = url;\n      });\n    },\n    // 上传模版逻辑\n    uploadBodyTemplate(event) {\n      this.handleFileUpload(event, url => {\n        this.bodyTemplateUrl = url;\n      });\n    },\n    // 通用文件上传逻辑\n    handleFileUpload(event, callback) {\n      const file = event.target.files[0];\n      if (!file) return;\n      const isImage = file.type.indexOf(\"image\") !== -1;\n      const isLt2M = file.size / 1024 / 1024 < 2;\n      if (!isImage) {\n        alert(\"请选择图片文件！\");\n        return;\n      }\n      if (!isLt2M) {\n        alert(\"上传图片大小不能超过 2MB！\");\n        return;\n      }\n      const reader = new FileReader();\n      reader.readAsDataURL(file);\n      reader.onload = () => {\n        callback(reader.result); // 设置图片 URL\n      };\n    }\n  },\n  beforeDestroy() {\n    // 清理上传控件\n    if (faceInputElement) {\n      faceInputElement.removeEventListener(\"change\", this.uploadFaceImage);\n      document.body.removeChild(faceInputElement);\n      faceInputElement = null;\n    }\n    if (bodyInputElement) {\n      bodyInputElement.removeEventListener(\"change\", this.uploadBodyTemplate);\n      document.body.removeChild(bodyInputElement);\n      bodyInputElement = null;\n    }\n  }\n};","map":{"version":3,"names":["faceInputElement","bodyInputElement","data","faceImageUrl","bodyTemplateUrl","generatedImageUrl","methods","toGetFaceImg","createInputElement","uploadFaceImage","click","toGetBodyTemplate","uploadBodyTemplate","callback","input","document","createElement","setAttribute","style","display","addEventListener","body","appendChild","event","handleFileUpload","url","file","target","files","isImage","type","indexOf","isLt2M","size","alert","reader","FileReader","readAsDataURL","onload","result","beforeDestroy","removeEventListener","removeChild"],"sources":["src/views/HomeView.vue"],"sourcesContent":["<template>\n  <div class=\"page-container\">\n    <!-- 左半边 -->\n    <div class=\"left-panel\">\n      <!-- 上半部分：上传头像 -->\n      <div class=\"upload-box\" @click=\"toGetFaceImg\">\n        <img :src=\"faceImageUrl\" v-if=\"faceImageUrl\" alt=\"人脸图像\" />\n        <p v-else>点击上传头像</p>\n      </div>\n      <!-- 下半部分：上传身体模版 -->\n      <div class=\"upload-box\" @click=\"toGetBodyTemplate\">\n        <img :src=\"bodyTemplateUrl\" v-if=\"bodyTemplateUrl\" alt=\"身体模版\" />\n        <p v-else>点击上传模版图片</p>\n      </div>\n    </div>\n    <!-- 右半边 -->\n    <div class=\"right-panel\">\n      <div class=\"output-box\">\n        <img :src=\"generatedImageUrl\" v-if=\"generatedImageUrl\" alt=\"生成图片\" />\n        <p v-else>生成的图片将在这里展示</p>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nlet faceInputElement = null;\nlet bodyInputElement = null;\n\nexport default {\n  data() {\n    return {\n      faceImageUrl: \"\", // 存储人脸图像 URL\n      bodyTemplateUrl: \"\", // 存储身体模版 URL\n      generatedImageUrl: \"\", // 存储后端返回的生成图片 URL\n    };\n  },\n  methods: {\n    // 点击上传头像\n    toGetFaceImg() {\n      if (!faceInputElement) {\n        faceInputElement = this.createInputElement(this.uploadFaceImage);\n      }\n      faceInputElement.click();\n    },\n    // 点击上传模版\n    toGetBodyTemplate() {\n      if (!bodyInputElement) {\n        bodyInputElement = this.createInputElement(this.uploadBodyTemplate);\n      }\n      bodyInputElement.click();\n    },\n    // 创建上传控件\n    createInputElement(callback) {\n      const input = document.createElement(\"input\");\n      input.setAttribute(\"type\", \"file\");\n      input.style.display = \"none\";\n      input.addEventListener(\"change\", callback, false);\n      document.body.appendChild(input);\n      return input;\n    },\n    // 上传头像逻辑\n    uploadFaceImage(event) {\n      this.handleFileUpload(event, (url) => {\n        this.faceImageUrl = url;\n      });\n    },\n    // 上传模版逻辑\n    uploadBodyTemplate(event) {\n      this.handleFileUpload(event, (url) => {\n        this.bodyTemplateUrl = url;\n      });\n    },\n    // 通用文件上传逻辑\n    handleFileUpload(event, callback) {\n      const file = event.target.files[0];\n      if (!file) return;\n\n      const isImage = file.type.indexOf(\"image\") !== -1;\n      const isLt2M = file.size / 1024 / 1024 < 2;\n\n      if (!isImage) {\n        alert(\"请选择图片文件！\");\n        return;\n      }\n      if (!isLt2M) {\n        alert(\"上传图片大小不能超过 2MB！\");\n        return;\n      }\n\n      const reader = new FileReader();\n      reader.readAsDataURL(file);\n      reader.onload = () => {\n        callback(reader.result); // 设置图片 URL\n      };\n    },\n  },\n  beforeDestroy() {\n    // 清理上传控件\n    if (faceInputElement) {\n      faceInputElement.removeEventListener(\"change\", this.uploadFaceImage);\n      document.body.removeChild(faceInputElement);\n      faceInputElement = null;\n    }\n    if (bodyInputElement) {\n      bodyInputElement.removeEventListener(\"change\", this.uploadBodyTemplate);\n      document.body.removeChild(bodyInputElement);\n      bodyInputElement = null;\n    }\n  },\n};\n</script>\n\n<style>\n/* 页面容器 */\n.page-container {\n  display: flex;\n  height: 100vh;\n}\n\n/* 左半边 */\n.left-panel {\n  width: 50%;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  padding: 20px;\n  box-sizing: border-box;\n}\n\n/* 右半边 */\n.right-panel {\n  width: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 20px;\n  box-sizing: border-box;\n  background-color: #f9f9f9;\n}\n\n/* 上传框 */\n.upload-box {\n  width: 100%;\n  height: 45%;\n  border: 1px solid #ddd;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  text-align: center;\n}\n\n/* 输出框 */\n.output-box {\n  width: 100%;\n  height: 100%;\n  border: 1px solid #ddd;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  text-align: center;\n}\n\n/* 图片 */\nimg {\n  max-width: 100%;\n  height: auto;\n  display: block;\n}\n\n/* 提示文字 */\np {\n  margin: 0;\n  color: #999;\n}\n</style>\n"],"mappings":"AA0BA,IAAAA,gBAAA;AACA,IAAAC,gBAAA;AAEA;EACAC,KAAA;IACA;MACAC,YAAA;MAAA;MACAC,eAAA;MAAA;MACAC,iBAAA;IACA;EACA;EACAC,OAAA;IACA;IACAC,aAAA;MACA,KAAAP,gBAAA;QACAA,gBAAA,QAAAQ,kBAAA,MAAAC,eAAA;MACA;MACAT,gBAAA,CAAAU,KAAA;IACA;IACA;IACAC,kBAAA;MACA,KAAAV,gBAAA;QACAA,gBAAA,QAAAO,kBAAA,MAAAI,kBAAA;MACA;MACAX,gBAAA,CAAAS,KAAA;IACA;IACA;IACAF,mBAAAK,QAAA;MACA,MAAAC,KAAA,GAAAC,QAAA,CAAAC,aAAA;MACAF,KAAA,CAAAG,YAAA;MACAH,KAAA,CAAAI,KAAA,CAAAC,OAAA;MACAL,KAAA,CAAAM,gBAAA,WAAAP,QAAA;MACAE,QAAA,CAAAM,IAAA,CAAAC,WAAA,CAAAR,KAAA;MACA,OAAAA,KAAA;IACA;IACA;IACAL,gBAAAc,KAAA;MACA,KAAAC,gBAAA,CAAAD,KAAA,EAAAE,GAAA;QACA,KAAAtB,YAAA,GAAAsB,GAAA;MACA;IACA;IACA;IACAb,mBAAAW,KAAA;MACA,KAAAC,gBAAA,CAAAD,KAAA,EAAAE,GAAA;QACA,KAAArB,eAAA,GAAAqB,GAAA;MACA;IACA;IACA;IACAD,iBAAAD,KAAA,EAAAV,QAAA;MACA,MAAAa,IAAA,GAAAH,KAAA,CAAAI,MAAA,CAAAC,KAAA;MACA,KAAAF,IAAA;MAEA,MAAAG,OAAA,GAAAH,IAAA,CAAAI,IAAA,CAAAC,OAAA;MACA,MAAAC,MAAA,GAAAN,IAAA,CAAAO,IAAA;MAEA,KAAAJ,OAAA;QACAK,KAAA;QACA;MACA;MACA,KAAAF,MAAA;QACAE,KAAA;QACA;MACA;MAEA,MAAAC,MAAA,OAAAC,UAAA;MACAD,MAAA,CAAAE,aAAA,CAAAX,IAAA;MACAS,MAAA,CAAAG,MAAA;QACAzB,QAAA,CAAAsB,MAAA,CAAAI,MAAA;MACA;IACA;EACA;EACAC,cAAA;IACA;IACA,IAAAxC,gBAAA;MACAA,gBAAA,CAAAyC,mBAAA,gBAAAhC,eAAA;MACAM,QAAA,CAAAM,IAAA,CAAAqB,WAAA,CAAA1C,gBAAA;MACAA,gBAAA;IACA;IACA,IAAAC,gBAAA;MACAA,gBAAA,CAAAwC,mBAAA,gBAAA7B,kBAAA;MACAG,QAAA,CAAAM,IAAA,CAAAqB,WAAA,CAAAzC,gBAAA;MACAA,gBAAA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}