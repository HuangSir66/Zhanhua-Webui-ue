{"ast":null,"code":"let faceInputElement = null;\nlet bodyInputElement = null;\nexport default {\n  data() {\n    return {\n      faceImageUrl: \"\",\n      // 存储人脸图像 URL\n      bodyTemplateUrl: \"\",\n      // 存储身体模版 URL\n      generatedImageUrl: \"\",\n      // 存储后端返回的生成图片 URL\n      backgroundImages: [\n      // 模拟的轮播图背景模版\n      \"background1.jpg\", \"background2.jpg\", \"background3.jpg\", \"background4.jpg\"]\n    };\n  },\n  methods: {\n    // 点击上传头像\n    toGetFaceImg() {\n      if (!faceInputElement) {\n        faceInputElement = this.createInputElement(this.uploadFaceImage);\n      }\n      faceInputElement.click();\n    },\n    // 点击上传模版图片\n    toGetBodyTemplate() {\n      if (!bodyInputElement) {\n        bodyInputElement = this.createInputElement(this.uploadBodyTemplate);\n      }\n      bodyInputElement.click();\n    },\n    // 创建上传控件\n    createInputElement(callback) {\n      const input = document.createElement(\"input\");\n      input.setAttribute(\"type\", \"file\");\n      input.style.display = \"none\";\n      input.addEventListener(\"change\", callback, false);\n      document.body.appendChild(input);\n      return input;\n    },\n    // 上传头像逻辑\n    uploadFaceImage(event) {\n      this.handleFileUpload(event, url => {\n        this.faceImageUrl = url;\n      });\n    },\n    // 上传模版逻辑\n    uploadBodyTemplate(event) {\n      this.handleFileUpload(event, url => {\n        this.bodyTemplateUrl = url;\n      });\n    },\n    // 通用文件上传逻辑\n    handleFileUpload(event, callback) {\n      const file = event.target.files[0];\n      if (!file) return;\n      const isImage = file.type.indexOf(\"image\") !== -1;\n      const isLt2M = file.size / 1024 / 1024 < 2;\n      if (!isImage) {\n        alert(\"请选择图片文件！\");\n        return;\n      }\n      if (!isLt2M) {\n        alert(\"上传图片大小不能超过 2MB！\");\n        return;\n      }\n      const reader = new FileReader();\n      reader.readAsDataURL(file);\n      reader.onload = () => {\n        callback(reader.result); // 设置图片 URL\n      };\n    },\n    // 选择背景图片\n    selectBackground(image) {\n      // 可实现选中背景图片的逻辑\n      console.log(\"选择的背景图片：\", image);\n    }\n  },\n  beforeDestroy() {\n    // 清理上传控件\n    if (faceInputElement) {\n      faceInputElement.removeEventListener(\"change\", this.uploadFaceImage);\n      document.body.removeChild(faceInputElement);\n      faceInputElement = null;\n    }\n    if (bodyInputElement) {\n      bodyInputElement.removeEventListener(\"change\", this.uploadBodyTemplate);\n      document.body.removeChild(bodyInputElement);\n      bodyInputElement = null;\n    }\n  }\n};","map":{"version":3,"names":["faceInputElement","bodyInputElement","data","faceImageUrl","bodyTemplateUrl","generatedImageUrl","backgroundImages","methods","toGetFaceImg","createInputElement","uploadFaceImage","click","toGetBodyTemplate","uploadBodyTemplate","callback","input","document","createElement","setAttribute","style","display","addEventListener","body","appendChild","event","handleFileUpload","url","file","target","files","isImage","type","indexOf","isLt2M","size","alert","reader","FileReader","readAsDataURL","onload","result","selectBackground","image","console","log","beforeDestroy","removeEventListener","removeChild"],"sources":["src/views/HomeView.vue"],"sourcesContent":["<template>\n  <div class=\"page-container\">\n    <!-- 顶部区域 -->\n    <div class=\"header\">\n      <img src=\"header.jpg\" alt=\"马拉松背景\" class=\"header-image\" />\n    </div>\n\n    <!-- 中间区域 -->\n    <div class=\"main-content\">\n      <!-- 左侧上传框 -->\n      <div class=\"upload-panel\">\n        <!-- 上传头像 -->\n        <div class=\"upload-box\" @click=\"toGetFaceImg\">\n          <img :src=\"faceImageUrl\" v-if=\"faceImageUrl\" alt=\"人脸图像\" />\n          <p v-else>点击上传头像</p>\n        </div>\n        <!-- 上传模版图片 -->\n        <div class=\"upload-box\" @click=\"toGetBodyTemplate\">\n          <img :src=\"bodyTemplateUrl\" v-if=\"bodyTemplateUrl\" alt=\"模版图像\" />\n          <p v-else>点击上传模版图片</p>\n        </div>\n      </div>\n\n      <!-- 右侧生成图展示 -->\n      <div class=\"output-panel\">\n        <div class=\"output-box\">\n          <img :src=\"generatedImageUrl\" v-if=\"generatedImageUrl\" alt=\"生成图片\" />\n          <p v-else>生成的图片将在这里展示</p>\n        </div>\n      </div>\n    </div>\n\n    <!-- 底部轮播图区域 -->\n    <div class=\"carousel-container\">\n      <div v-for=\"(image, index) in backgroundImages\" :key=\"index\" class=\"carousel-item\" @click=\"selectBackground(image)\">\n        <img :src=\"image\" alt=\"背景模版\" />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nlet faceInputElement = null;\nlet bodyInputElement = null;\n\nexport default {\n  data() {\n    return {\n      faceImageUrl: \"\", // 存储人脸图像 URL\n      bodyTemplateUrl: \"\", // 存储身体模版 URL\n      generatedImageUrl: \"\", // 存储后端返回的生成图片 URL\n      backgroundImages: [ // 模拟的轮播图背景模版\n        \"background1.jpg\",\n        \"background2.jpg\",\n        \"background3.jpg\",\n        \"background4.jpg\",\n      ],\n    };\n  },\n  methods: {\n    // 点击上传头像\n    toGetFaceImg() {\n      if (!faceInputElement) {\n        faceInputElement = this.createInputElement(this.uploadFaceImage);\n      }\n      faceInputElement.click();\n    },\n    // 点击上传模版图片\n    toGetBodyTemplate() {\n      if (!bodyInputElement) {\n        bodyInputElement = this.createInputElement(this.uploadBodyTemplate);\n      }\n      bodyInputElement.click();\n    },\n    // 创建上传控件\n    createInputElement(callback) {\n      const input = document.createElement(\"input\");\n      input.setAttribute(\"type\", \"file\");\n      input.style.display = \"none\";\n      input.addEventListener(\"change\", callback, false);\n      document.body.appendChild(input);\n      return input;\n    },\n    // 上传头像逻辑\n    uploadFaceImage(event) {\n      this.handleFileUpload(event, (url) => {\n        this.faceImageUrl = url;\n      });\n    },\n    // 上传模版逻辑\n    uploadBodyTemplate(event) {\n      this.handleFileUpload(event, (url) => {\n        this.bodyTemplateUrl = url;\n      });\n    },\n    // 通用文件上传逻辑\n    handleFileUpload(event, callback) {\n      const file = event.target.files[0];\n      if (!file) return;\n\n      const isImage = file.type.indexOf(\"image\") !== -1;\n      const isLt2M = file.size / 1024 / 1024 < 2;\n\n      if (!isImage) {\n        alert(\"请选择图片文件！\");\n        return;\n      }\n      if (!isLt2M) {\n        alert(\"上传图片大小不能超过 2MB！\");\n        return;\n      }\n\n      const reader = new FileReader();\n      reader.readAsDataURL(file);\n      reader.onload = () => {\n        callback(reader.result); // 设置图片 URL\n      };\n    },\n    // 选择背景图片\n    selectBackground(image) {\n      // 可实现选中背景图片的逻辑\n      console.log(\"选择的背景图片：\", image);\n    },\n  },\n  beforeDestroy() {\n    // 清理上传控件\n    if (faceInputElement) {\n      faceInputElement.removeEventListener(\"change\", this.uploadFaceImage);\n      document.body.removeChild(faceInputElement);\n      faceInputElement = null;\n    }\n    if (bodyInputElement) {\n      bodyInputElement.removeEventListener(\"change\", this.uploadBodyTemplate);\n      document.body.removeChild(bodyInputElement);\n      bodyInputElement = null;\n    }\n  },\n};\n</script>\n\n<style>\n/* 页面容器 */\n.page-container {\n  display: flex;\n  flex-direction: column;\n  height: 100vh;\n}\n\n/* 顶部区域 */\n.header {\n  height: 15%;\n}\n.header-image {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n}\n\n/* 中间区域 */\n.main-content {\n  display: flex;\n  flex: 1;\n}\n\n/* 左侧上传框 */\n.upload-panel {\n  width: 50%;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  padding: 20px;\n  box-sizing: border-box;\n}\n\n.upload-box {\n  width: 100%;\n  height: 45%;\n  border: 1px solid #ddd;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  text-align: center;\n}\n\n/* 右侧生成框 */\n.output-panel {\n  width: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 20px;\n  box-sizing: border-box;\n}\n\n.output-box {\n  width: 90%;\n  height: 90%;\n  border: 1px solid #ddd;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  text-align: center;\n}\n\n/* 底部轮播图 */\n.carousel-container {\n  height: 15%;\n  display: flex;\n  align-items: center;\n  overflow-x: auto;\n  background: #f9f9f9;\n  padding: 10px;\n}\n\n.carousel-item {\n  flex: 0 0 auto;\n  margin: 0 10px;\n  cursor: pointer;\n}\n\n.carousel-item img {\n  width: 100px;\n  height: 100px;\n  object-fit: cover;\n  border: 1px solid #ddd;\n  border-radius: 5px;\n}\n</style>\n"],"mappings":"AA0CA,IAAAA,gBAAA;AACA,IAAAC,gBAAA;AAEA;EACAC,KAAA;IACA;MACAC,YAAA;MAAA;MACAC,eAAA;MAAA;MACAC,iBAAA;MAAA;MACAC,gBAAA;MAAA;MACA,mBACA,mBACA,mBACA;IAEA;EACA;EACAC,OAAA;IACA;IACAC,aAAA;MACA,KAAAR,gBAAA;QACAA,gBAAA,QAAAS,kBAAA,MAAAC,eAAA;MACA;MACAV,gBAAA,CAAAW,KAAA;IACA;IACA;IACAC,kBAAA;MACA,KAAAX,gBAAA;QACAA,gBAAA,QAAAQ,kBAAA,MAAAI,kBAAA;MACA;MACAZ,gBAAA,CAAAU,KAAA;IACA;IACA;IACAF,mBAAAK,QAAA;MACA,MAAAC,KAAA,GAAAC,QAAA,CAAAC,aAAA;MACAF,KAAA,CAAAG,YAAA;MACAH,KAAA,CAAAI,KAAA,CAAAC,OAAA;MACAL,KAAA,CAAAM,gBAAA,WAAAP,QAAA;MACAE,QAAA,CAAAM,IAAA,CAAAC,WAAA,CAAAR,KAAA;MACA,OAAAA,KAAA;IACA;IACA;IACAL,gBAAAc,KAAA;MACA,KAAAC,gBAAA,CAAAD,KAAA,EAAAE,GAAA;QACA,KAAAvB,YAAA,GAAAuB,GAAA;MACA;IACA;IACA;IACAb,mBAAAW,KAAA;MACA,KAAAC,gBAAA,CAAAD,KAAA,EAAAE,GAAA;QACA,KAAAtB,eAAA,GAAAsB,GAAA;MACA;IACA;IACA;IACAD,iBAAAD,KAAA,EAAAV,QAAA;MACA,MAAAa,IAAA,GAAAH,KAAA,CAAAI,MAAA,CAAAC,KAAA;MACA,KAAAF,IAAA;MAEA,MAAAG,OAAA,GAAAH,IAAA,CAAAI,IAAA,CAAAC,OAAA;MACA,MAAAC,MAAA,GAAAN,IAAA,CAAAO,IAAA;MAEA,KAAAJ,OAAA;QACAK,KAAA;QACA;MACA;MACA,KAAAF,MAAA;QACAE,KAAA;QACA;MACA;MAEA,MAAAC,MAAA,OAAAC,UAAA;MACAD,MAAA,CAAAE,aAAA,CAAAX,IAAA;MACAS,MAAA,CAAAG,MAAA;QACAzB,QAAA,CAAAsB,MAAA,CAAAI,MAAA;MACA;IACA;IACA;IACAC,iBAAAC,KAAA;MACA;MACAC,OAAA,CAAAC,GAAA,aAAAF,KAAA;IACA;EACA;EACAG,cAAA;IACA;IACA,IAAA7C,gBAAA;MACAA,gBAAA,CAAA8C,mBAAA,gBAAApC,eAAA;MACAM,QAAA,CAAAM,IAAA,CAAAyB,WAAA,CAAA/C,gBAAA;MACAA,gBAAA;IACA;IACA,IAAAC,gBAAA;MACAA,gBAAA,CAAA6C,mBAAA,gBAAAjC,kBAAA;MACAG,QAAA,CAAAM,IAAA,CAAAyB,WAAA,CAAA9C,gBAAA;MACAA,gBAAA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}